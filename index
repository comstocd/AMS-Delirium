<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Delirium & AMS Workup Tool</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  background: #f0f4f8;
  padding: 16px;
  line-height: 1.6;
  color: #2d3748;
}

.container {
  max-width: 1000px;
  margin: 0 auto;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  overflow: hidden;
}

.header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 24px;
  text-align: center;
}

.header h1 {
  font-size: 28px;
  font-weight: 700;
  margin-bottom: 8px;
}

.header p {
  font-size: 14px;
  opacity: 0.95;
}

.content {
  padding: 20px;
}

.section {
  margin-bottom: 20px;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  overflow: hidden;
}

.section-header {
  background: #edf2f7;
  padding: 16px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  user-select: none;
}

.section-header:hover {
  background: #e2e8f0;
}

.section-header h2 {
  font-size: 18px;
  font-weight: 600;
  color: #2d3748;
}

.section-header .toggle {
  font-size: 20px;
  font-weight: bold;
  color: #667eea;
}

.section-body {
  padding: 20px;
  display: none;
}

.section-body.active {
  display: block;
}

.form-group {
  margin-bottom: 16px;
}

.form-group label {
  display: block;
  font-weight: 600;
  margin-bottom: 6px;
  color: #4a5568;
  font-size: 14px;
}

.form-group input[type="checkbox"] {
  width: 20px;
  height: 20px;
  margin-right: 10px;
  cursor: pointer;
}

.form-group input[type="number"],
.form-group select {
  width: 100%;
  padding: 10px;
  border: 1px solid #cbd5e0;
  border-radius: 6px;
  font-size: 16px;
}

.form-group input[type="number"]:focus,
.form-group select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.checkbox-list {
  display: grid;
  gap: 12px;
}

.checkbox-item {
  display: flex;
  align-items: center;
  padding: 12px;
  background: #f7fafc;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
}

.checkbox-item:hover {
  background: #edf2f7;
}

.checkbox-item input {
  margin: 0;
  margin-right: 12px;
}

.checkbox-item label {
  margin: 0;
  cursor: pointer;
  font-weight: 500;
}

.score-result {
  background: #edf2f7;
  border-left: 4px solid #667eea;
  padding: 16px;
  margin-top: 16px;
  border-radius: 4px;
}

.score-result.positive {
  background: #fff5f5;
  border-left-color: #f56565;
}

.score-result h3 {
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 8px;
  color: #2d3748;
}

.score-result p {
  font-size: 14px;
  color: #4a5568;
}

.btn {
  background: #667eea;
  color: white;
  padding: 12px 24px;
  border: none;
  border-radius: 6px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  margin-right: 12px;
  margin-top: 12px;
}

.btn:hover {
  background: #5a67d8;
}

.btn-secondary {
  background: #718096;
}

.btn-secondary:hover {
  background: #4a5568;
}

.guidance-box {
  background: #fffaf0;
  border: 1px solid #fbd38d;
  border-radius: 6px;
  padding: 16px;
  margin-bottom: 16px;
}

.guidance-box h4 {
  color: #744210;
  font-size: 16px;
  font-weight: 700;
  margin-bottom: 8px;
}

.guidance-box ul {
  margin-left: 20px;
  color: #744210;
}

.guidance-box ul li {
  margin-bottom: 6px;
  font-size: 14px;
}

.grid-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

@media (max-width: 768px) {
  .grid-2 {
    grid-template-columns: 1fr;
  }
}

.alert {
  padding: 16px;
  border-radius: 6px;
  margin-bottom: 16px;
  font-size: 14px;
}

.alert-info {
  background: #ebf8ff;
  border: 1px solid #90cdf4;
  color: #2c5282;
}

.alert-warning {
  background: #fffaf0;
  border: 1px solid #fbd38d;
  color: #744210;
}

@media print {
  .btn {
    display: none;
  }
  .section-body {
    display: block !important;
  }
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>🧠 Delirium & AMS Workup Tool</h1>
    <p>Evidence-based assessment and structured workup for hospitalized patients</p>
  </div>

  <div class="content">
    
    <!-- CAM-ICU Calculator -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>📊 CAM-ICU Calculator</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        <div class="alert alert-info">
          <strong>CAM-ICU Criteria:</strong> ALL of the following must be present: (1) Acute onset/fluctuation, (2) Inattention, AND either (3) Altered LOC OR (4) Disorganized thinking
        </div>
        
        <div class="checkbox-list">
          <div class="checkbox-item">
            <input type="checkbox" id="cam1" onchange="calculateCAM()">
            <label for="cam1">1. Acute onset or fluctuating course</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cam2" onchange="calculateCAM()">
            <label for="cam2">2. Inattention (difficulty focusing, easily distracted)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cam3" onchange="calculateCAM()">
            <label for="cam3">3. Altered level of consciousness (not alert)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cam4" onchange="calculateCAM()">
            <label for="cam4">4. Disorganized thinking (rambling, irrelevant)</label>
          </div>
        </div>

        <div id="cam-result" class="score-result" style="display:none;">
          <h3>Result: <span id="cam-result-text"></span></h3>
          <p id="cam-result-desc"></p>
        </div>
      </div>
    </div>

    <!-- 4AT Calculator -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>📊 4AT Score Calculator</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        <div class="alert alert-info">
          <strong>4AT Scoring:</strong> Score ≥4 suggests delirium. Score 1-3 suggests cognitive impairment. Score 0 = delirium unlikely.
        </div>

        <div class="form-group">
          <label for="alertness">Alertness (0-4 points)</label>
          <select id="alertness" onchange="calculate4AT()">
            <option value="0">Normal (0)</option>
            <option value="0">Mild sleepiness <10s (0)</option>
            <option value="4">Clearly abnormal (4)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="amt4">AMT4 - Age, DOB, Place, Current Year (0-2 points)</label>
          <select id="amt4" onchange="calculate4AT()">
            <option value="0">All correct (0)</option>
            <option value="1">1 error (1)</option>
            <option value="2">2+ errors or untestable (2)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="attention">Attention - Months backwards (0-2 points)</label>
          <select id="attention" onchange="calculate4AT()">
            <option value="0">Achieves 7+ months (0)</option>
            <option value="1">Starts but <7 months (1)</option>
            <option value="2">Unable to start (2)</option>
          </select>
        </div>

        <div class="form-group">
          <label for="acute">Acute change or fluctuating course (0-4 points)</label>
          <select id="acute" onchange="calculate4AT()">
            <option value="0">No (0)</option>
            <option value="4">Yes (4)</option>
          </select>
        </div>

        <div id="4at-result" class="score-result" style="display:none;">
          <h3>4AT Score: <span id="4at-score-value"></span></h3>
          <p id="4at-interpretation"></p>
        </div>
      </div>
    </div>

    <!-- Structured Workup: Metabolic -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>🧪 Metabolic Workup</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        <div class="checkbox-list">
          <div class="checkbox-item">
            <input type="checkbox" id="met1">
            <label for="met1">CBC with differential</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="met2">
            <label for="met2">Comprehensive metabolic panel (CMP)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="met3">
            <label for="met3">Calcium, Magnesium, Phosphate</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="met4">
            <label for="met4">Glucose / HbA1c</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="met5">
            <label for="met5">TSH / Free T4</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="met6">
            <label for="met6">Ammonia (if liver disease suspected)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="met7">
            <label for="met7">B12 / Folate / Thiamine</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="met8">
            <label for="met8">Cortisol (if adrenal insufficiency suspected)</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Structured Workup: Infectious -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>🦠 Infectious Workup</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        <div class="checkbox-list">
          <div class="checkbox-item">
            <input type="checkbox" id="inf1">
            <label for="inf1">Urinalysis + Urine Culture</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="inf2">
            <label for="inf2">Chest X-ray</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="inf3">
            <label for="inf3">Blood cultures (if febrile)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="inf4">
            <label for="inf4">Respiratory viral panel / COVID-19</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="inf5">
            <label for="inf5">Lumbar puncture (if meningitis/encephalitis suspected)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="inf6">
            <label for="inf6">C. difficile toxin (if diarrhea)</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Structured Workup: Structural -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>🧠 Structural / Neurologic Workup</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        <div class="checkbox-list">
          <div class="checkbox-item">
            <input type="checkbox" id="str1">
            <label for="str1">Non-contrast head CT (acute change, trauma, anticoagulation)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="str2">
            <label for="str2">MRI brain (if CT non-diagnostic and high suspicion)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="str3">
            <label for="str3">EEG (if non-convulsive seizure suspected)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="str4">
            <label for="str4">Neurology consultation</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Structured Workup: Toxicologic -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>💊 Toxicologic / Medication Review</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        <div class="checkbox-list">
          <div class="checkbox-item">
            <input type="checkbox" id="tox1">
            <label for="tox1">Complete medication reconciliation</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="tox2">
            <label for="tox2">Identify anticholinergic medications</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="tox3">
            <label for="tox3">Review benzodiazepines / opioids</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="tox4">
            <label for="tox4">Drug levels (digoxin, lithium, anticonvulsants)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="tox5">
            <label for="tox5">Urine drug screen (if substance use suspected)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="tox6">
            <label for="tox6">Blood alcohol level</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Reversible Causes Checklist -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>✅ Treatable Delirium Causes Checklist</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        <div class="alert alert-warning">
          <strong>Mnemonic: I WATCH DEATH</strong><br>
          Infection, Withdrawal, Acute metabolic, Trauma, CNS pathology, Hypoxia, Deficiencies, Endocrine, Acute vascular, Toxins/drugs, Heavy metals
        </div>
        <div class="checkbox-list">
          <div class="checkbox-item">
            <input type="checkbox" id="cause1">
            <label for="cause1">Infection (UTI, pneumonia, sepsis)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause2">
            <label for="cause2">Withdrawal (alcohol, benzodiazepines)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause3">
            <label for="cause3">Metabolic disturbance (Na, glucose, Ca, uremia)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause4">
            <label for="cause4">Hypoxia / Hypercarbia</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause5">
            <label for="cause5">Pain (untreated or undertreated)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause6">
            <label for="cause6">Medications (anticholinergics, benzos, opioids)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause7">
            <label for="cause7">CNS event (stroke, bleed, seizure)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause8">
            <label for="cause8">Urinary retention / Fecal impaction</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause9">
            <label for="cause9">Endocrine (thyroid, adrenal)</label>
          </div>
          <div class="checkbox-item">
            <input type="checkbox" id="cause10">
            <label for="cause10">Vitamin deficiency (B12, thiamine)</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Medication Management Guidance -->
    <div class="section">
      <div class="section-header" onclick="toggleSection(this)">
        <h2>💊 Medication Management Guidance</h2>
        <span class="toggle">+</span>
      </div>
      <div class="section-body">
        
        <div class="guidance-box">
          <h4>Medications to HOLD (AGS Beers Criteria)</h4>
          <ul>
            <li>Anticholinergics: diphenhydramine, hydroxyzine, promethazine, benztropine</li>
            <li>First-generation antihistamines</li>
            <li>Tricyclic antidepressants (amitriptyline, nortriptyline)</li>
            <li>Benzodiazepines (unless for alcohol/benzo withdrawal)</li>
            <li>Unnecessary sedatives/hypnotics</li>
            <li>High-dose opioids (reduce if possible)</li>
            <li>Muscle relaxants (cyclobenzaprine, carisoprodol)</li>
          </ul>
        </div>

        <div class="guidance-box">
          <h4>Non-Pharmacologic Interventions (FIRST LINE)</h4>
          <ul>
            <li>Reorientation: clock, calendar, familiar objects</li>
            <li>Sleep hygiene: reduce nighttime interruptions</li>
            <li>Early mobilization and physical therapy</li>
            <li>Ensure glasses and hearing aids available</li>
            <li>Minimize restraints and tethers</li>
            <li>Family presence when possible</li>
            <li>Adequate pain control</li>
          </ul>
        </div>

        <div class="guidance-box">
          <h4>Pharmacologic Options (If Severe Agitation Threatening Safety)</h4>
          <ul>
            <li><strong>Haloperidol:</strong> 0.5-1 mg IV/PO q4-6h PRN (avoid if QTc >500ms, Parkinson's)</li>
            <li><strong>Quetiapine:</strong> 12.5-25 mg PO qHS or BID (preferred in elderly)</li>
            <li><strong>Risperidone:</strong> 0.25-0.5 mg PO BID</li>
            <li><strong>AVOID benzodiazepines</strong> except for alcohol/sedative withdrawal</li>
            <li>Consult pharmacy/local protocol for dosing</li>
          </ul>
        </div>

        <div class="alert alert-warning">
          <strong>⚠️ Black Box Warning:</strong> Antipsychotics increase mortality risk in elderly patients with dementia-related psychosis. Use lowest effective dose for shortest duration. Document informed decision-making.
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div style="text-align: center; margin-top: 24px;">
      <button class="btn" onclick="window.print()">🖨️ Print Assessment</button>
      <button class="btn btn-secondary" onclick="resetAll()">🔄 Reset All</button>
    </div>

    <div style="margin-top: 24px; padding: 16px; background: #f7fafc; border-radius: 6px; font-size: 12px; color: #718096; text-align: center;">
      <p><strong>References:</strong> CAM-ICU (Ely 2001), 4AT (Bellelli 2014), NICE CG103, AGS Beers Criteria 2023, SCCM/APA Guidelines</p>
    </div>

  </div>
</div>

<script>
function toggleSection(header) {
  const body = header.nextElementSibling;
  const toggle = header.querySelector('.toggle');
  
  if (body.classList.contains('active')) {
    body.classList.remove('active');
    toggle.textContent = '+';
  } else {
    body.classList.add('active');
    toggle.textContent = '−';
  }
}

function calculateCAM() {
  const cam1 = document.getElementById('cam1').checked;
  const cam2 = document.getElementById('cam2').checked;
  const cam3 = document.getElementById('cam3').checked;
  const cam4 = document.getElementById('cam4').checked;
  
  const resultDiv = document.getElementById('cam-result');
  const resultText = document.getElementById('cam-result-text');
  const resultDesc = document.getElementById('cam-result-desc');
  
  // CAM-ICU positive: 1 AND 2 AND (3 OR 4)
  const positive = cam1 && cam2 && (cam3 || cam4);
  
  resultDiv.style.display = 'block';
  
  if (positive) {
    resultDiv.classList.add('positive');
    resultText.textContent = 'CAM-ICU POSITIVE';
    resultDesc.textContent = 'Delirium is present. Initiate workup for reversible causes and implement non-pharmacologic interventions.';
  } else {
    resultDiv.classList.remove('positive');
    resultText.textContent = 'CAM-ICU NEGATIVE';
    resultDesc.textContent = 'Criteria not met for delirium diagnosis by CAM-ICU. Consider alternative diagnoses if clinical suspicion remains high.';
  }
}

function calculate4AT() {
  const alertness = parseInt(document.getElementById('alertness').value);
  const amt4 = parseInt(document.getElementById('amt4').value);
  const attention = parseInt(document.getElementById('attention').value);
  const acute = parseInt(document.getElementById('acute').value);
  
  const total = alertness + amt4 + attention + acute;
  
  const resultDiv = document.getElementById('4at-result');
  const scoreValue = document.getElementById('4at-score-value');
  const interpretation = document.getElementById('4at-interpretation');
  
  resultDiv.style.display = 'block';
  scoreValue.textContent = total;
  
  if (total >= 4) {
    resultDiv.classList.add('positive');
    interpretation.textContent = 'Score ≥4: Possible delirium ± cognitive impairment. Clinical assessment and workup indicated.';
  } else if (total >= 1) {
    resultDiv.classList.remove('positive');
    interpretation.textContent = 'Score 1-3: Possible cognitive impairment. Delirium less likely but not excluded. Monitor closely.';
  } else {
    resultDiv.classList.remove('positive');
    interpretation.textContent = 'Score 0: Delirium or severe cognitive impairment unlikely. Consider alternative diagnoses.';
  }
}

function resetAll() {
  if (confirm('Reset all fields? This cannot be undone.')) {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(cb => cb.checked = false);
    
    const selects = document.querySelectorAll('select');
    selects.forEach(sel => sel.selectedIndex = 0);
    
    document.getElementById('cam-result').style.display = 'none';
    document.getElementById('4at-result').style.display = 'none';
    
    const sections = document.querySelectorAll('.section-body');
    sections.forEach(section => section.classList.remove('active'));
    
    const toggles = document.querySelectorAll('.toggle');
    toggles.forEach(toggle => toggle.textContent = '+');
  }
}
</script>

</body>
</html>
